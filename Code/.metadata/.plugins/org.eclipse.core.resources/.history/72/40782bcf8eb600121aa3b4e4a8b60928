import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.PriorityQueue;


public class Journey
{

	/**
	 * @param startStop
	 * @param endStop
	 * @param startTime
	 */
	public Journey()
	{
		Stop s0 = new Stop("Stockport, Bus Station");
		Stop s1 = new Stop("Stockport, Intermediate Road");
		Stop s2 = new Stop("Stockport, Dialstone Lane/Hillcrest Road");
		Stop s3 = new Stop("Stockport, Lower Bents Lane/Stockport Road");
		Stop s4 = new Stop("Stockport, Asda/Sainsbury's");
		Stop s5 = new Stop("Marple, Offerton Fold");
		Stop s6 = new Stop("Marple, Navigation Hotel");
		Stop s7 = new Stop("Marple, Back of Beyond");
		Stop s8 = new Stop("Marple, Norfolk Arms");
		Stop s9 = new Stop("Strines, Royal Oak");
		Stop s10 = new Stop("New Mills, Bus Station");
		Stop s11 = new Stop("Newtown, Train Station");
		Stop s12 = new Stop("Low Leighton, Ollerset View Hospital");
		Stop s13 = new Stop("Thornsett, Printers Arms");
		Stop s14 = new Stop("Birch Vale, Grouse Hotel");
		Stop s15 = new Stop("Hayfield, Bus Station");
		Stop s16 = new Stop("Glossop, Little Hayfield");
		Stop s17 = new Stop("Glossop, Grouse Inn");
		Stop s18 = new Stop("Glossop, Henry Street");
		Stop s19 = new Stop("Romiley, Corcoran Drive");
		Stop s20 = new Stop("Romiley, Train Station");
		Stop s21 = new Stop("Romiley, Frog and Diver Arms");
		Stop[] stops = {s0, s1, s2, s3, s4, s5, s6, s7, s8, s8, s9, s10, s11,
										s12, s13, s14, s15, s16, s17, s18, s19, s20, s21};
		//Stockport, Bus Station
		s0.setAdj(new Edge[]{ new Edge(s5, 9),
													new Edge(s1, 0),
													new Edge(s4, 0)});
		
		//Stockport, Intermediate Road
		s1.setAdj(new Edge[]{ new Edge(s2, 0)});
		
		//Stockport, Dialstone Lane/Hillcrest Road
		s2.setAdj(new Edge[]{ new Edge(s0, 0),
													new Edge(s6, 0)});
		
		//Stockport, Lower Bents Lane/Stockport Road
		s3.setAdj(new Edge[]{ new Edge(s0, 0),
													new Edge(s20, 0)});
		
		//Stockport, Asda/Sainsbury's
		s4.setAdj(new Edge[]{ new Edge(s3, 0)});
		
		//Marple, Offerton Fold
		s5.setAdj(new Edge[]{ new Edge(s0, 0),
													new Edge(s6, 0)});
		
		//Marple, Navigation Hotel
		s6.setAdj(new Edge[]{ new Edge(s5, 0),
													new Edge(s2, 0),
													new Edge(s7, 0),
													new Edge(s9, 0)});
		
		//Marple, Back of Beyond
		s7.setAdj(new Edge[]{ new Edge(s8, 0)});
		
		//Marple, Norfolk Arms
		s8.setAdj(new Edge[]{ new Edge(s6, 0),
													new Edge(s19, 0)});
		
		//Strines, Royal Oak
		s9.setAdj(new Edge[]{ new Edge(s6, 0),
													new Edge(s10, 0)});
		
		//New Mills, Bus Station
		s10.setAdj(new Edge[]{ new Edge(s9, 0),
													 new Edge(s11, 0)});
		
		//Newtown, Train Station
		s11.setAdj(new Edge[]{ new Edge(s10, 0),
													 new Edge(s12, 0)});
		
		//Low Leighton, Ollerset View Hospital
		s12.setAdj(new Edge[]{ new Edge(s11, 0),
													 new Edge(s13, 0)});
		
		//Thornsett, Printers Arms
		s13.setAdj(new Edge[]{ new Edge(s12, 0),
													 new Edge(s14, 0)});
		
		//Birch Vale, Grouse Hotel
		s14.setAdj(new Edge[]{ new Edge(s13, 0),
													 new Edge(s15, 0)});
		
		//Hayfield, Bus Station
		s15.setAdj(new Edge[]{ new Edge(s14, 0),
													 new Edge(s16, 0)});
		
		//Glossop, Little Hayfield
		s16.setAdj(new Edge[]{ new Edge(s15, 0),
													 new Edge(s17, 0)});
		
		//Glossop, Grouse Inn
		s17.setAdj(new Edge[]{ new Edge(s16, 0),
													 new Edge(s18, 0)});
		
		//Glossop, Henry Street
		s18.setAdj(new Edge[]{ new Edge(s17, 0)});
		
		//Romiley, Corcoran Drive
		s19.setAdj(new Edge[]{ new Edge(s8, 0),
													 new Edge(s20, 0)});
		
		//Romiley, Train Station
		s20.setAdj(new Edge[]{ new Edge(s19, 0),
													 new Edge(s21, 0)});
		
		//Romiley, Frog and Diver Arms
		s21.setAdj(new Edge[]{ new Edge(s20, 0),
													 new Edge(s3, 0)});
		
	}
	
	public static List<Stop> getShortestPathTo(Stop target)
	{
		List<Stop> path = new ArrayList<Stop>();
		for(Stop stop = target; stop != null; stop = stop.getPrevious())
		{
			path.add(stop);
		}
		
		Collections.reverse(path);
		return path;
	}
	
	public static void calculatePaths(Stop startStop)
	{
		//Set the min distance of start stop to 0
		startStop.setMinDistance(0);
		//Priority queue to store stops
		PriorityQueue<Stop> stopQueue = new PriorityQueue<Stop>();
		//Add the startStop to the queue
		stopQueue.add(startStop);
		//While the stopQueue is not empty
		while(!stopQueue.isEmpty())
		{
			//Remove the stop from the front of the queue 
			Stop u = stopQueue.poll();
			//For all edges of the stop work out minDistance
			for(Edge edge: u.getAdj())
			{
				Stop stop = edge.getTarget();
				//Calculate the min ditance going though u
				int distanceThroughU = u.getMinDistance() + edge.getDistance();
				//If smaller than the current min for stop then set min and previous
				if(distanceThroughU < stop.getMinDistance())
				{
					stopQueue.remove(stop);
					stop.setMinDistance(distanceThroughU);
					stop.setPrevious(u);
					stopQueue.add(stop);
				}
			}
		}
	}
}
